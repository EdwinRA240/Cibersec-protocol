<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBERSEC PROTOCOL: COFFEE BREAK</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        // Use a reliable monospace font stack for the terminal look
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'terminal-black': '#000000',
                        'neon-green': '#00ff00',
                        'neon-blue': '#00ffff',
                    },
                    fontFamily: {
                        // Using a robust system monospace stack
                        mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Base terminal style - Neon Green on Black */
        body {
            font-family: 'ui-monospace', monospace;
            min-height: 100vh;
            background-color: #050505;
            color: #00ff00; 
            text-shadow: 0 0 2px rgba(0, 255, 0, 0.5); /* Subtle neon glow */
        }
        /* Terminal Window Border and Shadow */
        .terminal-window {
            background-color: rgba(0, 0, 0, 0.9);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            border: 1px solid #00ff00;
        }
        /* Input and Button base styles */
        input, button {
            border: 1px solid #00ff00;
            background-color: #050505;
            color: #00ff00;
            text-shadow: none;
            transition: all 0.2s ease-in-out;
        }
        input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.6);
            border-color: #00ffff;
        }
        /* Submit button specific style */
        .submit-btn {
            background-color: #00ff00;
            color: #000000;
            font-weight: bold;
            text-shadow: none;
        }
        .submit-btn:hover {
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
            background-color: #00cc00;
        }
        /* Blinking cursor for immersion */
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        .cursor {
            animation: blink 1s step-end infinite;
        }
        /* Simple fade-in animation for transitions */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in {
            animation: fadeIn 1s ease-out forwards;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4 font-mono">

    <div id="mainContainer" class="w-full max-w-xl animate-fade-in">
        <div class="terminal-window p-6 sm:p-8 rounded-none">
            
            <!-- Terminal Header -->
            <div class="flex justify-between items-center mb-6 border-b border-neon-green pb-2">
                <span class="text-neon-blue font-bold uppercase">
                    [SYSTEM_LOG]
                </span>
                <span class="text-neon-green">
                    > STATUS: PENDING_AUTH <span class="cursor">_</span>
                </span>
            </div>

            <!-- Narrative / Story -->
            <p class="mb-4 text-xs text-neon-blue">
                // AGENT PROTOCOL 7: RECRUITMENT. The Corporation is seeking the highest bidder.
                // Your ability to decode the obvious is your first firewall.
                // GOOD LUCK, AGENT.
            </p>

            <!-- Riddle Part 1: The Code Source -->
            <p class="mb-6 text-sm text-neon-green">
                <span class="text-neon-blue">_MESSAGE_START:</span><br>
                “A monk once hid his message in plain sight. He said: ‘The answer is within the order of things… from the first to the last.’ The parchment only showed lines of numbers.”
            </p>

            <!-- Riddle Part 2 - The Question (Phase 1) -->
            <div id="riddleQuestion" class="mb-6 pt-4 border-t border-neon-green/50">
                <p class="text-base text-neon-green">
                    [QUERY_01]: "I count everything — from A to Z. Without me, there would be no alphabet, no order, no sequence, no list. What am I?"
                </p>
            </div>

            <!-- Phase 1: Answer Form -->
            <div id="phase1" class="flex flex-col sm:flex-row gap-3">
                <input
                    type="text"
                    id="answerInput"
                    placeholder="> ENTER SOURCE CODE..."
                    class="flex-grow p-3 rounded-none bg-terminal-black focus:ring-0 border-neon-green uppercase"
                >
                <button
                    id="submitButton"
                    class="submit-btn py-3 px-6 rounded-none transition duration-300"
                >
                    [ EXECUTE ]
                </button>
            </div>

            <!-- Phase 2: Decodification (Initially Hidden) -->
            <div id="decodingSection" class="mt-8 pt-6 border-t border-neon-blue hidden opacity-0 transition duration-1000">
                <h2 class="text-xl font-bold text-neon-blue mb-4 text-center">
                    [ACCESS GRANTED]
                </h2>

                <!-- Good Luck Message -->
                <p class="text-sm text-neon-green mb-4 text-center font-bold">
                    >> Transmission Received. Decode the following sequence.
                </p>
                
                <!-- Cipher Code: COFFEE (3 15 6 6 5 5) -->
                <div class="text-center mb-6">
                    <p id="cipherCode" class="text-2xl sm:text-3xl font-mono tracking-widest text-neon-blue p-3 bg-gray-900/50 rounded-none inline-block shadow-inner shadow-neon-green/30 whitespace-nowrap border-r-4 border-l-4 border-neon-blue">
                        3 15 6 6 5 5
                    </p>
                </div>

                <!-- Phase 2: Answer Form -->
                <div class="flex flex-col sm:flex-row gap-3">
                    <input
                        type="text"
                        id="decodedInput"
                        placeholder="> ENTER DECRYPTED MESSAGE (NO SPACES)..."
                        class="flex-grow p-3 rounded-none bg-terminal-black focus:ring-0 border-neon-blue uppercase"
                    >
                    <button
                        id="decodeButton"
                        class="submit-btn py-3 px-6 rounded-none transition duration-300"
                    >
                        [ DECRYPT ]
                    </button>
                </div>
            </div>

            <!-- Global Result Area (for error messages and final success) -->
            <div id="resultOutput" class="mt-8 p-5 text-center hidden">
                <!-- Messages appear here -->
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const answerInput = document.getElementById('answerInput');
            const submitButton = document.getElementById('submitButton');
            const decodingSection = document.getElementById('decodingSection');
            const decodedInput = document.getElementById('decodedInput');
            const decodeButton = document.getElementById('decodeButton');
            const resultOutput = document.getElementById('resultOutput');

            // Utility to display system messages with correct styling
            const showMessage = (message, isSuccess = false) => {
                // Clear all previous styling classes for clean redraw
                resultOutput.classList.remove('hidden', 'bg-terminal-black', 'border', 'border-red-600', 'border-neon-green', 'animate-fade-in');
                
                if (isSuccess) {
                    resultOutput.classList.add('bg-terminal-black', 'border', 'border-neon-green');
                    resultOutput.innerHTML = `<p class="text-base text-neon-green">[STATUS: OK] ${message}</p>`;
                } else {
                    resultOutput.classList.add('bg-terminal-black', 'border', 'border-red-600');
                    resultOutput.innerHTML = `<p class="text-base text-red-500">[ERROR] ${message}</p>`;
                }
                
                resultOutput.classList.add('rounded-none', 'animate-fade-in');

                // Auto-hide error messages after 3 seconds
                if (!isSuccess) {
                    setTimeout(() => {
                        resultOutput.classList.add('hidden');
                        resultOutput.classList.remove('bg-terminal-black', 'border-red-600', 'border');
                        resultOutput.innerHTML = '';
                    }, 3000);
                }
            };

            // --- Phase 1: Check for "numbers" ---
            const checkAnswer = () => {
                const answer = answerInput.value.trim().toLowerCase().replace(/[^a-z]/g, ''); 
                const correctAnswer = 'numbers';

                if (answer === correctAnswer) {
                    answerInput.disabled = true;
                    submitButton.disabled = true;
                    submitButton.classList.replace('bg-neon-green', 'bg-gray-700');
                    submitButton.classList.replace('hover:bg-emerald-600', 'hover:bg-gray-700');
                    submitButton.innerText = "[ SOURCE LOCKED ]";
                    
                    decodingSection.classList.remove('hidden');
                    setTimeout(() => {
                        decodingSection.classList.add('opacity-100');
                        decodingSection.classList.remove('opacity-0');
                    }, 50);

                    showMessage("CODE SOURCE VERIFIED. PROCEED TO DECRYPTION.", true);
                    setTimeout(() => { resultOutput.classList.add('hidden'); }, 3000);

                } else {
                    showMessage("ACCESS DENIED. INCORRECT CODE SOURCE.", false);
                }
            };

            // --- Phase 2: Check for "COFFEE" (C=3, O=15, F=6, F=6, E=5, E=5) ---
            const checkDecodedMessage = () => {
                // Target phrase is "COFFEE"
                const targetPhrase = 'COFFEE'; 
                const decodedMessage = decodedInput.value.trim().toUpperCase().replace(/[^A-Z]/g, ''); // Normalize

                if (decodedMessage === targetPhrase) {
                    decodedInput.disabled = true;
                    decodeButton.disabled = true;

                    // Update UI for final reveal
                    decodingSection.style.opacity = '0';
                    setTimeout(() => {
                        decodingSection.classList.add('hidden');
                        
                        // Final Output
                        resultOutput.classList.remove('hidden', 'border-red-600');
                        resultOutput.classList.add('bg-terminal-black', 'border-4', 'border-neon-blue', 'rounded-none', 'animate-fade-in');

                        resultOutput.innerHTML = `
                            <p class="text-xl font-bold text-neon-green mb-4">
                                [ DECRYPTION COMPLETE ]
                            </p>
                            <p class="text-3xl font-extrabold text-neon-blue tracking-wider mb-6">
                                ${targetPhrase}
                            </p>
                            <p class="text-2xl text-neon-green font-bold mb-4">
                                MISSION ACKNOWLEDGED.
                            </p>
                            <p class="text-5xl font-extrabold text-neon-green tracking-widest whitespace-nowrap">
                                SEE YOU SOON <span class="text-6xl">👨🏻‍💻</span>
                            </p>
                        `;
                    }, 500);

                } else {
                    showMessage("DECRYPTION FAILED. SEQUENCE MISMATCH.", false);
                }
            };

            // Event Listeners
            submitButton.addEventListener('click', checkAnswer);
            answerInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !submitButton.disabled) {
                    checkAnswer();
                }
            });

            decodeButton.addEventListener('click', checkDecodedMessage);
            decodedInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !decodeButton.disabled) {
                    checkDecodedMessage();
                }
            });
        });
    </script>
</body>
</html>
